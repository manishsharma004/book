

\chapter{Github}
\label{C:github}

\FILENAME

In some classes the material may be openly shared in code
repositories. In other cases the class participants may be developing
lecture notes or other valuable material that other students can
benefit from. What if not only instructors, but also students could
contribute to the goal of developing such material. For this reason
we need some mechanism to share content with a large number of
students. For this reason we have elected to use git for creating the
content that you are reading now. 

First, we like to introduce you to git and github.com (Section
\ref{s:github}).  Next, we provide you with the basic commands to
interact with git from the commandline (Section
\ref{s:git-commands}). Than we will introduce you how you can contribute
to this set of documentations with pull requests.

\section{Obverview}\label{s:github}

Github is a code repository that allows the development of code in a
distributed fashion. There are many good tutorials about github.
Some of them can be found on the github Web page. An interactive
tutorial is for example available at

\URL{https://try.github.io/}

However although this tutorial is great in some cases you have already
a repository set up by yoru organization and you do not have to
completely initialize it. Thus do not just replicate the commands in
the tutorial, or the once we present here before not evaluating their
consequences. In general make sure you verify if the command does what
you expect before you execute it.

A more extensive list of tutorials can be found at

\URL{https://help.github.com/articles/what-are-other-good-resources-for-learning-git-and-github}

The github foundation has a number of excellent videos about git. If you
are unfamiliar with git and you like to watch videos in addition to
reading the documentation we recommend these videos

\URL{https://www.youtube.com/user/GitHubGuides/videos}

Next, we introduce some important concepts used in github.

\section{Upload Key}\label{upload-key}

Before you can work with a repository in an easy fashion you need to
upload a public key in order to access your repository. Naturally, you
need to generate a key first which is explained in 

\TODO{lessons-ssh-generate-key}

before you upload one. Copy the contents of your
\verb|.ssh/id_rsa.pub| file and add them to
\href{https://github.com/settings/keys}{your github keys}.

More information on this topic can be found on the
\href{https://help.github.com/articles/adding-a-new-ssh-key-to-your-github-account/}{github
  Web page}.

\section{Fork}\label{fork}

Forking is the first step to contributing to projects on GitHub. Forking
allows you to copy a repository and work on it under your own account.
Next, creating a branch, making some changes, and offering a pull
request to the original repository, rounds out your contribution to the
open source project.

\video{Git}{1:41}{Fork}{https://www.youtube.com/watch?v=5oJHRbqEofs}

\section{Rebase}\label{rebase}

When you start editing your project, you diverge from the original
version. During your developing, the original version may be updated, or
other developers may have some of their branches implementing good
features that you would like to include in your current work. That is
when `Rebase' becomes useful. When you `Rebase' to certain points, could
be a newer Master or other custom branch, consider you graft all your
on-going work right to that point.

Rebase may fail, because some times it is impossible to achieve what we
just described as conflicts may exist. For example, you and the to-be-rebased copy
both edited some common text section. Once this happens, human
intervention needs to take place to resolve the conflict.

\video{Git}{4:20}{Rebase}{https://www.youtube.com/watch?v=SxzjZtJwOgo}

\section{Remote}\label{remote}

Collaborating with others involves managing the remote repositories
and pushing and pulling data to and from them when you need to share
work. Managing remote repositories includes knowing how to add remote
repositories, remove remotes that are no longer valid, manage various
remote branches and define them as being tracked or not, and more.

Though out this semester, you will typically work on two `remote' repos.
One is the office class repo, and another is the repo you forked from
the class repo. The class repo is used as the centralized, authority and
final version of all student submissions. The repo under your own Github
account is for your personal storage. To show progress on a weekly
basis you need to commit your changes on a weekly basis. However make
sure that things in the master branch are working. If not, just use
another branch to conduct your changes and merge at a later
time. we like you to call your development branch ``dev''.

\URL{https://git-scm.com/book/en/v2/Git-Basics-Working-with-Remotes}

\section{Pull Request}\label{pull-request}

Pull requests are a means of starting a conversation about a proposed
change back into a project. We'll be taking a look at the strength of
conversation, integration options for fuller information about a change,
and cleanup strategy for when a pull request is finished.

\video{Git}{4:26}{Pull Request}{https://www.youtube.com/watch?v=d5wpJ5VimSU}

\section{Branch}\label{branch}

Branches are an excellent way to not only work safely on features or
experiments, but they are also the key element in creating Pull Requests
on GitHub. Let's take a look at why we want branches, how to create and
delete branches, and how to switch branches in this episode.

\video{Git}{2:25}{Branch}{https://www.youtube.com/watch?v=H5GJfcp3p4Q}

\section{Checkout}\label{checkout}

Change where and what you're working on with the checkout command.
Whether we're switching branches, wanting to look at the working tree at
a specific commit in history, or discarding edits we want to throw away,
all of these can be done with the checkout command.

\video{Git}{3:11}{Checkout}{https://www.youtube.com/watch?v=HwrPhOp6-aM}


\section{Merge}\label{merge}

Once you know branches, merging that work into master is the natural
next step. Find out how to merge branches, identify and clean up merge
conflicts or avoid conflicts until a later date. Lastly, we'll look at
combining the merged feature branch into a single commit and cleaning up
your feature branch after merges.

\video{Git}{3:11}{Merge}{https://www.youtube.com/watch?v=yyLiplDQtf0}

\section{GUI}\label{gui}

Using Graphical User Interfaces can supplement your use of the command
line to get the best of both worlds. GitHub for Windows and GitHub for
Mac allow for switching to command line, ease of grabbing repositories
from GitHub, and participating in a particular pull request. We'll also
see the auto-updating functionality helps us stay up to date with stable
versions of Git on the command line.

\video{Git}{3:47}{GUI}{https://www.youtube.com/watch?v=BMYOs5jflGE}

There are many other git GUI tools available that directly integrate into your
operating system finders, windows, \ldots{}, or PyCharm. It is up to you
to identify such tools and see if they are useful for you. Most of the
people we work with us git from the command line, even if they use
PyCharm, eclipse, or other tools that have build in git support. You can
identify a tool that works best for you.

\section{Windows}\label{windows}

This is a quick tour of GitHub for Windows. It offers GitHub newcomers a
brief overview of what this feature-loaded version control tool and an
equally powerful web application can do for developers, designers, and
managers using Windows in both the open source and commercial software
worlds. More: \url{http://windows.github.com}

\video{Git}{1:25}{Windows}{https://www.youtube.com/watch?v=YBbkvCrfDSo}


\section{Git from the Commandline}\label{s:git-commands}

Although github.com provides a powerful GUI and other GUI tools are
available to interface with github.com, the use of git from the
commandline can often be faster and in many cases may be simpler. 

Git commandline tools can be easily installed on a variety of
operating systems including Linux, OSX, and Windows. Many great
tutorials exist that will allow you to complete this task easily. We
found the following two tutorials sufficient to get the task
accomplished:

\URL{https://git-scm.com/book/en/v2/Getting-Started-Installing-Git}

\URL{https://www.atlassian.com/git/tutorials/install-git}

Although the later is provided by an alternate repository to
github. The installation instructions are very nice and are not
impacted by it. Once you have installed git you need to configure it.

\section{Configuration}\label{config}

Once you installed Git, you can need to configure it properly.  This
includes setting up your username, email address, line endings, and
color, along with the settings' associated configuration scopes.

\video{Git}{2:47}{Configuration}{https://www.youtube.com/watch?v=ZChtKFLiaNw}

It is important that make sure that use the \verb|git config| command
to initialize git for the first time on each new computer system or
virtual machine you use. This will ensure that you use on all
resources the same name and e-mail so that git history and log will
show consistently your checkins across all devices and computers you
use.  If you do not do this, your checkins in git do not show up in a
consistent fashion as a single user. Thus on each computer execute the
following commands:

\begin{verbatim}
$ git config --global user.name "Albert Zweistein"
$ git config --global user.email albert.zweistein@gmail.com
\end{verbatim}

where you replace the information with the information related to you.
You can set the editor to emacs with:

\begin{verbatim}
$ git config --global core.editor emacs
\end{verbatim}

Naturally if you happen to want to use other editors you can configure
them by specifying the command that starts them up. You will also need
to decide if you want to push branches individually or all branches at
the same time. It will be up to you to make what whill work for you
best. We found that the following seems to work best:

\begin{verbatim}
git config --global push.default matching
\end{verbatim}

More information about a first time setup is documented at:

\begin{verbatim}
* http://git-scm.com/book/en/Getting-Started-First-Time-Git-Setup
\end{verbatim}

To check your setup you can say:

\begin{verbatim}
$ git config --list
\end{verbatim}

One problem we observed is that students often simply copy and paste
instructions, but do not read carefully the error that is reported
back and do not fix it. Overlooking the proper set of the push.default
is often overlooked. Thus we remind you: {\bf Please read the
  information on the screen when you set up}.

\section{Upload your public key}\label{upload-your-public-key}

Please upload your public key to the repository as documented in
github, while going to your account and find it in settings. There you
will find a panel SSH key that you can click on which brings you to
the window allowing you to add a new key. If you have difficulties
with this find a video from the github foundation that explains this.

\section{Working with a directory that was provided for you}

In case your course provided you with a github directory, starting and
working in it is going to be real simple. If you are the only student
working on this you still need to make sure that papers or programs
you manage in the repository work and do not interfere with scripts
that instructors may use to check your assignments. Thus it is god to
still create a branch, work in the branch and than merge the branch
into the master once you verified things work. After you merged you
can push the content to the github repository.

Tip: Please use only \textbf{lowercase} characters in the directory
names and no special characters such as @ ; / \_ and spaces. In general
we recommend that you avoid using directoru names with capital letters
spaces and \_ in them. This will simplify your documentation efforts and
make the URLs from git more readable. Also while on some OS's the
directories ``MyDirectory'' is different from ``mydirectory'' on OSX
it is considered the same and thus renaming from capital to lower case
can not be done without first renaming it to another directory. 


Your homework for submission should be organized according to folders in
your clone repository. To submit a particular assignment, you must first
add it using:

\begin{verbatim}
git add <name of the file you are adding>
\end{verbatim}

Afterwards, commit it using:

\begin{verbatim}
git commit -m "message describing your submission"
\end{verbatim}

Then push it to your remote repository using:

\begin{verbatim}
git push
\end{verbatim}

If you want to modify your submission, you only need to:

\begin{verbatim}
git commit -m "message relating to updated file"
\end{verbatim}

afterwards:

\begin{verbatim}
git push
\end{verbatim}

If you lose any documents locally, you can retrieve them from your
remote repository using:

\begin{verbatim}
git pull
\end{verbatim}

\section{README.yml}

In case you take classes with us you will have to create a README.yaml
file in the top most directory of your repository. It serves the
purpose of identifying your submission for homework and information
about yourself.

It is important to follow the format precisely. Any derivation from
this format will not allow us to see your homework as our automated
scripts will use the README.yml to detect them. However this is simple
as the README must be a valid YAML file. you can easily check
validation with a python program and you should consider this your
first homework, to write a program that checks if your README.yml is
valid. Make sure the file does not contain ay TABs.  Please also mind
that all filenames of all homework and the main directory must be
\textbf{lowercase} and do not include spaces. This will simplify your
task of managing the files across different operating systems.

Naturally you need to use the first name and lastname that you used
in the university so we can identify you. Assignments will 

Please check with your instructor on the format of the README
file. typically they will have provided a template for you.



\section{Contributing to the Document}



\subsection{Clone}

\begin{verbatim}
$ git remote add upstream https://github.com/cloudmesh/book
\end{verbatim}


\subsection{Merge}

As we are allowing contribution by the community, they are best managed
through a merge with our upstream repository so you can update to the
newest status before you issue a pul request.

Make sure you have upstream repo defined:

\begin{verbatim}
$ git remote add upstream https://github.com/cloudmesh/book
\end{verbatim}

Now Get latest from upstream:

\begin{verbatim}
$ git rebase upstream/master
\end{verbatim}

In this step, the conflicting file shows up (in my case it was
refs.bib):

\begin{verbatim}
$ git status
\end{verbatim}

should show the name of the conflicting file:

\begin{verbatim}
$ git diff <file name>
\end{verbatim}

should show the actual differences. May be in some cases, It is easy to
simply take latest version from upstream and reapply your changes.

So you can decide to checkout one version earlier of the specific file.
At this stage, the re-base should be complete. So, you need to commit
and push the changes to your fork:

\begin{verbatim}
$ git commit
$ git rebase origin/master
$ git push
\end{verbatim}

Then reapply your changes to refs.bib - simply use the backedup version
and use the editor to redo the changes.

At this stage, only refs.bib is changed:

\begin{verbatim}
$ git status
\end{verbatim}

should show the changes only in refs.bib. Commit this change using:

\begin{verbatim}
$ git commit -a -m "new:usr: <message>"
\end{verbatim}

And finally push the last commited change:

\begin{verbatim}
$ git push
\end{verbatim}

The changes in the file to resolve merge conflict automatically goes to
the original pull request and the pull request can be merged
automatically.

You still have to issue the pull request from the Github Web page so it
is registered with the upstream repository.

\subsection{Resources}

\begin{itemize}
\item
  \href{https://git-scm.com/book/en/v2}{Pro Git book}
\item
  \href{https://git-scm.com/docs/gittutorial}{Official tutorial}
\item
  \href{https://git-scm.com/doc}{Official documentation}
\item
  \href{http://www.tutorialspoint.com/git/}{TutorialsPoint on git}
\item
  \href{https://try.github.io}{Try git online}
\item
  \href{https://help.github.com/articles/good-resources-for-learning-git-and-github/}{GitHub
  resources for learning git} Note: this is for github and not for
  gitlab. However as it is for gt the only thing you have to do is
  replace hihub, for gitlab.
\item
  \href{https://www.atlassian.com/git/tutorials/}{Atlassian tutorials
  for git}
\end{itemize}

In addition the tutorials from atlasian are a good source. However
remember that you may not use bitbucket as the repository, so ignore
those tutorials. We found the following useful

\begin{itemize}
\item
  What is git: \url{https://www.atlassian.com/git/tutorials/what-is-git}
\item
  Installing git:
  \url{https://www.atlassian.com/git/tutorials/install-git}
\item
  git config:
  \url{https://www.atlassian.com/git/tutorials/setting-up-a-repository\#git-config}
\item
  git clone:
  \url{https://www.atlassian.com/git/tutorials/setting-up-a-repository\#git-clone}
\item
  saving changes:
  \url{https://www.atlassian.com/git/tutorials/saving-changes}
\item
  collaborating with git:
  \url{https://www.atlassian.com/git/tutorials/syncing}
\end{itemize}


\subsection{Exercise}\label{exercise}

\begin{description}
\item[Github.1:]
How do you set your favorite editor as a default with github config
\item[Github.2:]
What is the difference between merge and rebase?
\item[Github.3:]
Assume you have made a change in your local fork, however other users
have since committed to the master branch, how can you make sure your
commit works off from the latest information in the master branch?
\item[Github.4:]
Find a spelling error in the Web page or a contribution and create a
pull request for it.
\item[Gitlab.5:] Create a README.yml in your github account directory
  provided for you for class.
information

\end{description}
